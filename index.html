<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Live Predictions â€” 500 Slots (Hacker UI)</title>
<style>
  :root{
    --bg:#010308;
    --panel:rgba(10,20,30,0.85);
    --muted:#e5f6ff;
    --neon:#00ffb3;
    --neon2:#7df0ff;
    --accent:#00e5ff;
    --card-bg:linear-gradient(180deg, rgba(15,25,35,0.9), rgba(5,10,15,0.95));
    --shadow: 0 8px 30px rgba(0,0,0,0.6);
    --glass-border: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box;font-family:"Inter",system-ui;color:var(--muted);}
  body{margin:0;background:radial-gradient(circle at center,#00131f 0%,#000509 60%);overflow-y:auto;padding:16px;}

  canvas#matrix{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:0.15;background:transparent;}

  .topbar{position:relative;z-index:5;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
  h1{font-size:20px;margin:0;color:var(--neon);text-shadow:0 0 10px var(--neon2);}
  .sub{font-size:13px;color:#aee;}

  .tabs{display:flex;gap:8px;background:rgba(255,255,255,0.05);padding:6px;border-radius:10px;}
  .tab{padding:8px 12px;border-radius:8px;cursor:pointer;transition:.2s;color:#def;}
  .tab.active{background:linear-gradient(90deg,var(--neon),var(--neon2));color:#012;font-weight:700;}

  .meta{display:flex;gap:12px;background:var(--panel);padding:10px;border-radius:10px;border:1px solid var(--glass-border);}
  .mitem strong{color:var(--neon);}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:12px;}
  .card{background:var(--card-bg);border-radius:12px;padding:12px;display:flex;gap:12px;border:1px solid var(--glass-border);
        box-shadow:0 0 15px rgba(0,255,180,0.06);transition:.2s;}
  .card:hover{transform:translateY(-4px);border-color:var(--neon2);}
  .card.pinned{border:2px solid var(--neon);}
  .avatar{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;
          font-size:17px;background:linear-gradient(90deg,var(--neon2),var(--neon));color:#021;}
  .name{font-weight:700;font-size:15px;color:#fff;}
  .hit{font-size:12px;color:#aee;margin-top:5px;}
  .badge{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.1);font-weight:700;color:var(--neon2);}
  .trend{display:flex;gap:5px;margin-top:6px;flex-wrap:wrap;}
  .dot{width:18px;height:18px;border-radius:4px;font-size:11px;display:flex;align-items:center;justify-content:center;}
  .dot.win{background:linear-gradient(90deg,var(--neon),#baffff);color:#021;}
  .dot.lose{background:rgba(255,255,255,0.06);color:#ccc;}
  .progress{height:6px;background:rgba(255,255,255,0.05);border-radius:999px;margin-top:6px;}
  .progress i{display:block;height:100%;background:linear-gradient(90deg,var(--neon),var(--neon2));width:0%;transition:width .8s;}
  .leaderboard{display:flex;align-items:center;gap:10px;background:rgba(0,255,156,0.08);padding:10px;border-radius:10px;margin-bottom:12px;}
  .leader-avatar{width:44px;height:44px;border-radius:50%;background:var(--neon2);color:#021;font-weight:bold;
                 display:flex;align-items:center;justify-content:center;}
  @media(max-width:720px){.grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr));}}
</style>
</head>
<body>
<canvas id="matrix"></canvas>

<div class="topbar">
  <div>
    <h1>Live Predictions <span style="font-size:12px;color:var(--neon2)">â€” WinGo_30S</span></h1>
    <div class="sub">Kalyugi Live Prediction</div>
  </div>
  <div>
    <div class="tabs">
      <div class="tab active" id="tabSize">B/S</div>
      <div class="tab" id="tabColor">Color</div>
    </div>
    <div class="meta">
      <div class="mitem">Next Period: <strong id="nextIssue">â€”</strong></div>
      <div class="mitem">Periods: <strong id="periodCount">0</strong></div>
      <div class="mitem">Last Update: <span id="lastFetch">â€”</span></div>
    </div>
  </div>
</div>

<div class="leaderboard" id="leaderboard" style="display:none"></div>
<div class="grid" id="listContainer"></div>

<script>
(() => {
  // ---------- MATRIX RAIN ----------
  const canvas=document.getElementById('matrix');
  const ctx=canvas.getContext('2d');
  let w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight;
  const fontSize=14,cols=Math.floor(w/fontSize);
  const drops=Array(cols).fill(1);
  const chars='01';
  function draw(){
    ctx.fillStyle='rgba(0,0,0,0.1)';
    ctx.fillRect(0,0,w,h);
    ctx.fillStyle='#00ff9c';
    ctx.font=fontSize+'px monospace';
    for(let i=0;i<drops.length;i++){
      const text=chars[Math.floor(Math.random()*chars.length)];
      ctx.fillText(text,i*fontSize,drops[i]*fontSize);
      if(drops[i]*fontSize>h&&Math.random()>0.975)drops[i]=0;
      drops[i]++;
    }
  }
  setInterval(draw,50);
  window.addEventListener('resize',()=>{w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;});

  // ---------- TIMING ----------
  let currentPeriod=null,periodCount=0;
  function getCurrentPeriod(){
    const now=new Date();
    const start=new Date(now.getFullYear(),now.getMonth(),now.getDate(),5,30,0);
    let elapsed=Math.floor((now-start)/1000);if(elapsed<0)elapsed=0;
    const count=Math.floor(elapsed/30);
    const next=count+1;
    const y=now.getFullYear(),m=String(now.getMonth()+1).padStart(2,'0'),d=String(now.getDate()).padStart(2,'0');
    const period=`${y}${m}${d}${String(next).padStart(5,'0')}`;
    const remaining=30-(elapsed%30);
    return{period,remaining,next};
  }

  // ---------- 500 NAMES ----------
  const NAMES = [];
  for(let i=0;i<500;i++)NAMES.push("Player_"+(i+1));

  const colorMap={0:"Red",1:"Green",2:"Red",3:"Green",4:"Red",5:"Green",6:"Red",7:"Green",8:"Red",9:"Violet"};
  const sizeOf=n=>(n>=5?"Big":"Small");
  const randNum=()=>Math.floor(Math.random()*10);

  let slots=[],visibleMode='size';
  const list=document.getElementById('listContainer'),leaderboard=document.getElementById('leaderboard');

  for(let i=0;i<500;i++){
    const p=randNum();
    const s={id:i+1,name:NAMES[i],predictedNumber:p,predictedColor:colorMap[p],predictedSize:sizeOf(p),
             winsColor:0,winsSize:0,lossesColor:0,lossesSize:0,history:[],pinned:false,el:null};
    slots.push(s);
  }

  function makeCard(s){
    const d=document.createElement('div');
    d.className='card';
    d.innerHTML=`
      <div class="avatar" style="background:linear-gradient(180deg,hsl(${(s.id*37)%360} 70% 95%),hsl(${(s.id*37)%360} 70% 88%))">${s.name[0]}</div>
      <div style="flex:1">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><div class="name">${s.name}</div><div id="hit-${s.id}" class="hit">Hit:0%</div></div>
          <div id="plan-${s.id}" class="badge">${s.predictedSize}</div>
        </div>
        <div class="trend" id="trend-${s.id}"></div>
        <div class="progress" id="prog-${s.id}"><i style="width:0%"></i></div>
      </div>
      <div class="glyph" style="position:absolute;right:8px;top:8px;font-size:11px;color:#888">#${s.id}</div>`;
    d.ondblclick=()=>{s.pinned=!s.pinned;d.classList.toggle('pinned',s.pinned);sortSlots();};
    s.el=d;list.appendChild(d);
  }

  slots.forEach(makeCard);

  function renderSlot(s){
    const hit=document.getElementById(`hit-${s.id}`);
    const plan=document.getElementById(`plan-${s.id}`);
    const prog=document.querySelector(`#prog-${s.id} i`);
    const wins=visibleMode==='size'?s.winsSize:s.winsColor;
    const losses=visibleMode==='size'?s.lossesSize:s.lossesColor;
    const rate=(wins+losses)?Math.round(wins/(wins+losses)*100):0;
    if(hit)hit.textContent=`Hit:${rate}%`;
    if(plan){
      if(visibleMode==='color'){
        if(s.predictedColor==='Red')plan.textContent='ðŸ”´ Red';
        else if(s.predictedColor==='Green')plan.textContent='ðŸŸ¢ Green';
        else plan.textContent='ðŸŸ£ Violet';
      }else plan.textContent=s.predictedSize;
    }
    if(prog)prog.style.width=rate+'%';
    const trend=document.getElementById(`trend-${s.id}`);
    if(trend){
      trend.innerHTML='';
      s.history.slice(0,10).forEach(h=>{
        const d=document.createElement('div');
        d.className='dot '+((visibleMode==='size'?h.winSize:h.winColor)?'win':'lose');
        d.textContent=(visibleMode==='size'?(h.winSize?'ðŸ¤‘':'ðŸ–•'):(h.winColor?'ðŸ¤‘':'ðŸ–•'));
        trend.appendChild(d);
      });
    }
  }

  function applyActual(act){
    const num=parseInt(act.number,10);
    if(isNaN(num))return;
    const color=colorMap[num],size=sizeOf(num);
    slots.forEach(s=>{
      const pred=s.predictedNumber;
      const winC=colorMap[pred]===color;
      const winS=sizeOf(pred)===size;
      if(winC)s.winsColor++;else s.lossesColor++;
      if(winS)s.winsSize++;else s.lossesSize++;
      s.history.unshift({winColor:winC,winSize:winS});
      if(s.history.length>10)s.history.length=10;
      const p=randNum();s.predictedNumber=p;s.predictedColor=colorMap[p];s.predictedSize=sizeOf(p);
      renderSlot(s);
    });
    document.querySelectorAll('.card').forEach((c,idx)=>{if(idx<40){c.classList.add('pulse-new');setTimeout(()=>c.classList.remove('pulse-new'),900);}});
    sortSlots();
  }

  function sortSlots(){
    const sorted=[...slots].sort((a,b)=>{
      if(a.pinned&&!b.pinned)return-1;
      if(b.pinned&&!a.pinned)return 1;
      const aw=visibleMode==='size'?a.winsSize:a.winsColor;
      const bw=visibleMode==='size'?b.winsSize:b.winsColor;
      return bw-aw;
    });
    sorted.forEach(s=>list.appendChild(s.el));
    const top=sorted[0];
    if(top){
      leaderboard.style.display='flex';
      leaderboard.innerHTML=`<div class="leader-avatar">${top.name[0]}</div><div>${top.name} â€¢ #${top.id} â€” ${(visibleMode==='size'?top.winsSize:top.winsColor)} Wins</div>`;
    }else leaderboard.style.display='none';
  }

  document.getElementById('tabSize').onclick=()=>{visibleMode='size';toggleTabs();};
  document.getElementById('tabColor').onclick=()=>{visibleMode='color';toggleTabs();};
  function toggleTabs(){
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(visibleMode==='size'?'tabSize':'tabColor').classList.add('active');
    slots.forEach(renderSlot);sortSlots();
  }

  function updatePeriodUI(){
    const {period}=getCurrentPeriod();
    document.getElementById('nextIssue').textContent=period;
    document.getElementById('lastFetch').textContent=new Date().toLocaleTimeString();
    if(period!==currentPeriod){
      currentPeriod=period;periodCount++;
      document.getElementById('periodCount').textContent=periodCount;
      const resultNumber=Math.floor(Math.random()*10);
      applyActual({number:resultNumber.toString()});
    }
    setTimeout(updatePeriodUI,1000);
  }

  slots.forEach(renderSlot);
  sortSlots();
  updatePeriodUI();
})();
</script>
</body>
</html>